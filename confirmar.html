<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ConfirmaciÃ³n de correo</title>
  <link rel="stylesheet" href="style.css">
  <script src="https://cdn.tailwindcss.com"></script>
</head>

<body class="min-h-screen flex items-center justify-center bg-gray-900 text-white">
  <div class="bg-gray-800 p-8 rounded shadow-lg text-center max-w-md">
    <h1 class="text-3xl font-bold mb-4">ConfirmaciÃ³n de correo</h1>
    <p id="message" class="mb-6 text-gray-300">Procesando confirmaciÃ³n...</p>
    <a href="index.html" class="bg-blue-600 hover:bg-blue-700 px-4 py-2 rounded-lg transition text-white">
      Ir al inicio
    </a>
  </div>

  <script>
    // ðŸ‘‰ Cambia si tu backend tiene otro dominio
    const BACKEND_URL = 'https://pymax-backend.onrender.com';

    const params = new URLSearchParams(window.location.search);
    const token = params.get('token');
    const messageEl = document.getElementById('message');

    if (!token) {
      messageEl.innerHTML = `<span class="text-red-400 font-semibold">Token no encontrado.</span>`;
    } else {
      fetch(`${BACKEND_URL}/api/confirm?token=${encodeURIComponent(token)}`)
        .then(async res => {
          const data = await res.json().catch(() => ({}));
          if (res.ok) {
            messageEl.innerHTML = `<span class="text-green-400 font-semibold">${
              data.message || 'Cuenta confirmada correctamente'
            }</span>`;
          } else {
            messageEl.innerHTML = `<span class="text-red-400 font-semibold">${
              data.error || 'No se pudo confirmar la cuenta'
            }</span>`;
          }
        })
        .catch(err => {
          console.error('Error al conectar con el servidor:', err);
          messageEl.innerHTML = `<span class="text-red-400 font-semibold">Error al conectar con el servidor.</span>`;
        });
    }
  </script>
</body>
</html>
