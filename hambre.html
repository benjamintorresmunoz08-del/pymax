<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Panel Hambre de poder - Pymax</title>

  <!-- Tailwind -->
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- Tu CSS clásico -->
  <link rel="stylesheet" href="style.css" />
</head>

<body class="relative min-h-screen flex flex-col bg-gray-900 text-white font-sans overflow-x-hidden">

  <!-- Aurora de fondo -->
  <div class="absolute inset-0 -z-10 overflow-hidden">
    <div class="absolute top-0 left-1/2 w-[800px] h-[800px] bg-blue-500 opacity-20 blur-[150px] rounded-full animate-pulse"></div>
    <div class="absolute bottom-0 right-1/3 w-[900px] h-[900px] bg-purple-500 opacity-20 blur-[160px] rounded-full animate-pulse delay-700"></div>
    <div class="absolute top-1/3 left-1/4 w-[600px] h-[600px] bg-indigo-400 opacity-10 blur-[180px] rounded-full animate-pulse delay-1000"></div>
  </div>

  <!-- Navbar -->
  <nav class="flex justify-between items-center px-8 py-4 bg-transparent backdrop-blur-md">
    <div class="flex items-center space-x-3">
      <img src="img/pymax.png" alt="Logo Pymax" class="w-16 h-16 object-contain" />
      <div class="flex flex-col">
        <span class="text-2xl font-bold tracking-wide text-white">PYMAX</span>
        <span class="text-xs text-gray-300">Panel premium: Hambre de poder</span>
      </div>
    </div>

    <div class="flex items-center gap-4">
      <span id="userNameLabel" class="text-sm text-gray-200 hidden"></span>
      <span id="trialBadgePanel" class="text-xs px-3 py-1 rounded-full bg-emerald-500/15 text-emerald-300 hidden"></span>

      <a href="servicios.html"
         class="text-sm border border-gray-400/60 hover:bg-gray-800/70 px-4 py-2 rounded-lg transition">
        Volver a servicios
      </a>
      <button id="logoutBtnPanel"
              class="text-sm bg-red-600 hover:bg-red-700 px-4 py-2 rounded-lg transition">
        Cerrar sesión
      </button>
    </div>
  </nav>

  <!-- Contenido principal -->
  <main class="flex-1 px-6 py-8 md:py-10 max-w-6xl mx-auto space-y-10">

    <!-- HERO / RESUMEN -->
    <section class="bg-gray-900/80 border border-indigo-500/50 rounded-3xl p-6 md:p-8 shadow-2xl">
      <div class="flex flex-col md:flex-row md:items-center md:justify-between gap-6">
        <div class="text-left space-y-3">
          <p class="text-xs uppercase tracking-[0.3em] text-emerald-300">Nivel máximo Pymax</p>
          <h1 class="text-3xl md:text-4xl font-extrabold bg-gradient-to-r from-emerald-400 via-teal-400 to-blue-300 bg-clip-text text-transparent">
            Hambre de poder: panel del CEO
          </h1>
          <p class="text-gray-300 text-sm md:text-base max-w-xl">
            Aquí administras tu empresa como un <span class="font-semibold">negocio serio</span>:
            IA financiera experta, planillas 100% funcionales, impuestos claros, remuneraciones
            ordenadas y reportes listos para decisiones grandes.
          </p>
        </div>

        <div class="space-y-3 text-sm">
          <div class="bg-gray-950/70 border border-gray-700 rounded-2xl p-4">
            <p class="text-xs text-gray-400 mb-1">Estado de tu plan</p>
            <p id="planStatusLabel" class="text-sm text-gray-100 font-medium">
              Plan Hambre de poder activo
            </p>
            <p id="planStatusDetail" class="text-xs text-gray-400 mt-1">
              —
            </p>
          </div>
        </div>
      </div>

      <!-- Navegación por secciones -->
      <div class="mt-6">
        <p class="text-xs text-gray-400 mb-2">Navega por las áreas clave de tu empresa:</p>
        <div class="flex flex-wrap gap-3">
          <button data-scroll="#sec-ia"
                  class="px-4 py-2 rounded-full text-xs bg-blue-600/80 hover:bg-blue-700 transition">
            IA experta 24/7
          </button>
          <button data-scroll="#sec-planillas"
                  class="px-4 py-2 rounded-full text-xs bg-indigo-600/70 hover:bg-indigo-700 transition">
            Planillas y Excel
          </button>
          <button data-scroll="#sec-gemelo"
                  class="px-4 py-2 rounded-full text-xs bg-emerald-600/80 hover:bg-emerald-700 transition">
            Gemelo financiero (simulador)
          </button>
          <button data-scroll="#sec-impuestos"
                  class="px-4 py-2 rounded-full text-xs bg-purple-600/80 hover:bg-purple-700 transition">
            Impuestos e IVA
          </button>
          <button data-scroll="#sec-remuneraciones"
                  class="px-4 py-2 rounded-full text-xs bg-fuchsia-600/80 hover:bg-fuchsia-700 transition">
            Remuneraciones y equipo
          </button>
          <button data-scroll="#sec-reportes"
                  class="px-4 py-2 rounded-full text-xs bg-cyan-600/80 hover:bg-cyan-700 transition">
            Orden total & reportes
          </button>
        </div>
      </div>
    </section>

    <!-- IA EXPERTA -->
    <section id="sec-ia" class="grid md:grid-cols-2 gap-8 items-start">
      <div class="bg-gray-900/85 border border-emerald-500/70 rounded-2xl p-6 shadow-xl">
        <h2 class="text-2xl font-semibold mb-2 text-emerald-300">IA experta en economía y finanzas 24/7</h2>
        <p class="text-gray-200 text-sm mb-3">
          Esta sección está pensada para que preguntes todo lo que un director financiero (CFO)
          te respondería: márgenes, precios, costos, rentabilidad, decisiones difíciles.
        </p>
        <ul class="text-gray-200 text-sm space-y-2">
          <li>• Dudas sobre tu negocio, precios, márgenes y estructura de costos.</li>
          <li>• Estrategias para aumentar ventas y mejorar utilidades.</li>
          <li>• Interpretación de estados de resultados, balances y flujo de caja.</li>
          <li>• Recomendaciones personalizadas según tus metas y contexto.</li>
        </ul>
        <p class="text-xs text-gray-400 mt-4">
          Próximamente conectaremos tu información real de ventas, costos y planillas
          para que la IA tome decisiones aún más precisas para tu empresa.
        </p>
      </div>

      <!-- Maqueta de chat -->
      <div class="bg-gray-900/80 border border-gray-700 rounded-2xl p-5 shadow-lg flex flex-col h-full">
        <div class="flex items-center justify-between mb-3">
          <h3 class="text-sm font-semibold text-gray-200">Chat con IA Pymax (vista previa)</h3>
          <span class="text-[11px] px-2 py-1 rounded-full bg-emerald-500/15 text-emerald-300">
            En desarrollo
          </span>
        </div>

        <div class="flex-1 bg-gray-950/80 rounded-xl p-3 mb-3 text-left text-xs space-y-2 overflow-y-auto">
          <div class="bg-gray-800/80 rounded-lg p-2 max-w-[80%]">
            <p class="text-[11px] text-gray-200">
              IA Pymax: Hola, soy tu IA financiera. Cuéntame sobre tu empresa:
              ¿qué vendes y qué te preocupa hoy?
            </p>
          </div>
          <div class="bg-blue-700/80 rounded-lg p-2 max-w-[80%] ml-auto">
            <p class="text-[11px] text-gray-100">
              Usuario: Quiero saber si mis precios cubren bien los costos y qué margen estoy logrando.
            </p>
          </div>
          <div class="bg-gray-800/80 rounded-lg p-2 max-w-[80%]">
            <p class="text-[11px] text-gray-200">
              IA Pymax: Con gusto. En tu planilla de ventas verás el margen bruto por producto.
              Si quieres subir rentabilidad, podemos simular cambios de precios en el gemelo financiero.
            </p>
          </div>
        </div>

        <div class="flex gap-2">
          <input
            disabled
            type="text"
            placeholder="Muy pronto podrás escribir aquí tus preguntas reales..."
            class="flex-1 bg-gray-800/80 text-gray-400 text-xs px-3 py-2 rounded-lg border border-gray-700 cursor-not-allowed"
          />
          <button
            disabled
            class="px-3 py-2 text-xs rounded-lg bg-emerald-600/60 text-gray-200 cursor-not-allowed"
          >
            Enviar
          </button>
        </div>
        <p class="text-[10px] text-gray-500 mt-2">
          Por ahora es solo diseño. Cuando activemos la IA conectada a tus datos tendrás un CFO digital 24/7.
        </p>
      </div>
    </section>

    <!-- PLANILLAS Y EXCEL -->
    <section id="sec-planillas" class="grid md:grid-cols-2 gap-8 items-start">
      <div class="bg-gray-900/85 border border-blue-500/70 rounded-2xl p-6 shadow-xl">
        <h2 class="text-2xl font-semibold mb-2 text-blue-300">Planillas 100% funcionales y personalizadas</h2>
        <p class="text-gray-200 text-sm mb-3">
          El plan Hambre de poder incluye planillas inteligentes (Excel / Google Sheets) diseñadas para
          controlar todo tu negocio con colores, secciones claras y cálculos automáticos.
        </p>
        <ul class="text-gray-200 text-sm space-y-2">
          <li>• Registro de ventas por día, semana y mes.</li>
          <li>• Registro de compras, costos, sueldos y otros gastos.</li>
          <li>• Utilidades, pérdidas y flujo de caja en tiempo real.</li>
          <li>• Secciones diferenciadas por colores para entender todo de un vistazo.</li>
          <li>• Comentarios y sugerencias dentro de la planilla para mejorar tus decisiones.</li>
        </ul>
        <p class="text-xs text-gray-400 mt-4">
          Puedes usar la plantilla base y luego personalizaremos columnas, colores y fórmulas según tu rubro.
        </p>
      </div>

      <div class="bg-gray-900/80 border border-gray-700 rounded-2xl p-5 shadow-lg space-y-4">
        <h3 class="text-sm font-semibold text-gray-200 mb-1">Descarga de Excel y registro rápido</h3>

        <a
          href="plantilla-hambre.xlsx"
          download
          class="inline-flex items-center justify-center w-full bg-gradient-to-r from-blue-500 to-indigo-600 hover:from-blue-600 hover:to-indigo-700 px-4 py-2.5 rounded-lg text-sm font-medium transition shadow-lg shadow-blue-900/40 mb-3"
        >
          Descargar plantilla Excel Hambre de poder
        </a>
        <p class="text-[11px] text-gray-400 -mt-2 mb-2">
          Coloca el archivo <code>plantilla-hambre.xlsx</code> en la misma carpeta del proyecto
          para que este botón la descargue correctamente.
        </p>

        <form class="space-y-3 text-xs">
          <div class="grid md:grid-cols-2 gap-3">
            <div>
              <label class="block mb-1 text-gray-300">Fecha</label>
              <input type="date"
                     class="w-full bg-gray-800/80 border border-gray-700 rounded-lg px-2 py-1.5 text-xs" />
            </div>
            <div>
              <label class="block mb-1 text-gray-300">Ventas del día (CLP)</label>
              <input type="number" placeholder="Ej: 350000"
                     class="w-full bg-gray-800/80 border border-gray-700 rounded-lg px-2 py-1.5 text-xs" />
            </div>
          </div>
          <div class="grid md:grid-cols-2 gap-3">
            <div>
              <label class="block mb-1 text-gray-300">Costos / compras (CLP)</label>
              <input type="number" placeholder="Ej: 210000"
                     class="w-full bg-gray-800/80 border border-gray-700 rounded-lg px-2 py-1.5 text-xs" />
            </div>
            <div>
              <label class="block mb-1 text-gray-300">Comentario rápido</label>
              <input type="text"
                     placeholder="Ej: Promo 2x1 funcionó muy bien"
                     class="w-full bg-gray-800/80 border border-gray-700 rounded-lg px-2 py-1.5 text-xs" />
            </div>
          </div>
          <button
            type="button"
            class="w-full bg-gray-800/90 hover:bg-gray-700 px-4 py-2 rounded-lg text-xs font-medium transition"
          >
            Guardar en tu planilla (maqueta visual)
          </button>
        </form>
        <p class="text-[10px] text-gray-500">
          Más adelante conectaremos este formulario a tu base de datos real y a tu Excel personalizado.
        </p>
      </div>
    </section>

    <!-- GEMELO FINANCIERO (SIMULADOR) -->
    <section id="sec-gemelo" class="bg-gray-900/85 border border-emerald-500/70 rounded-2xl p-6 md:p-7 shadow-2xl">
      <div class="flex flex-col md:flex-row md:items-start md:justify-between gap-6 mb-4">
        <div>
          <h2 class="text-2xl font-semibold mb-2 text-emerald-300">Gemelo financiero: simula escenarios</h2>
          <p class="text-gray-200 text-sm max-w-xl">
            Aquí puedes probar ideas antes de aplicarlas en tu empresa real: subir precios, bajar costos,
            contratar a alguien, lanzar una campaña, etc. Es el “laboratorio” de tu negocio.
          </p>
        </div>
        <span class="text-xs px-3 py-1 rounded-full bg-emerald-500/15 text-emerald-300 self-start">
          Simulador local (sin guardar datos reales)
        </span>
      </div>

      <div class="grid md:grid-cols-2 gap-8">
        <!-- Formulario de simulación -->
        <div class="space-y-3 text-xs">
          <div class="grid md:grid-cols-2 gap-3">
            <div>
              <label class="block mb-1 text-gray-300">Ventas mensuales actuales (CLP)</label>
              <input id="simVentas" type="number" placeholder="Ej: 8.000.000"
                     class="w-full bg-gray-800/80 border border-gray-700 rounded-lg px-2 py-1.5 text-xs" />
            </div>
            <div>
              <label class="block mb-1 text-gray-300">Costos mensuales actuales (CLP)</label>
              <input id="simCostos" type="number" placeholder="Ej: 5.000.000"
                     class="w-full bg-gray-800/80 border border-gray-700 rounded-lg px-2 py-1.5 text-xs" />
            </div>
          </div>

          <div class="grid md:grid-cols-2 gap-3">
            <div>
              <label class="block mb-1 text-gray-300">% aumento de ventas esperado</label>
              <input id="simDeltaVentas" type="number" placeholder="Ej: 15"
                     class="w-full bg-gray-800/80 border border-gray-700 rounded-lg px-2 py-1.5 text-xs" />
            </div>
            <div>
              <label class="block mb-1 text-gray-300">% cambio en costos</label>
              <input id="simDeltaCostos" type="number" placeholder="Ej: -5 (si bajas costos)"
                     class="w-full bg-gray-800/80 border border-gray-700 rounded-lg px-2 py-1.5 text-xs" />
            </div>
          </div>

          <div>
            <label class="block mb-1 text-gray-300">Escenario / idea</label>
            <input id="simDescripcion" type="text"
                   placeholder="Ej: Subir precios 10% y mejorar negociación con proveedores"
                   class="w-full bg-gray-800/80 border border-gray-700 rounded-lg px-2 py-1.5 text-xs" />
          </div>

          <button id="btnSimular"
                  class="w-full bg-gradient-to-r from-emerald-500 to-teal-500 hover:from-emerald-600 hover:to-teal-600 px-4 py-2 rounded-lg text-xs font-medium transition shadow-lg shadow-emerald-900/40">
            Simular escenario
          </button>

          <p class="text-[10px] text-gray-500">
            La simulación es local y rápida. Más adelante, conectaremos estos resultados con tus datos reales
            y con la IA para recibir recomendaciones automáticas.
          </p>
        </div>

        <!-- Resultados de simulación -->
        <div class="bg-gray-950/80 border border-gray-700 rounded-2xl p-4 text-xs space-y-3">
          <h3 class="text-sm font-semibold text-gray-200">Resultados del gemelo financiero</h3>
          <div id="simResultado" class="space-y-2 text-gray-200">
            <p class="text-gray-400">
              Ingresa tus números y presiona <span class="font-semibold">“Simular escenario”</span>
              para ver cómo cambian tus utilidades y márgenes.
            </p>
          </div>
        </div>
      </div>
    </section>

    <!-- IMPUESTOS E IVA -->
    <section id="sec-impuestos" class="bg-gray-900/85 border border-purple-500/70 rounded-2xl p-6 shadow-xl">
      <h2 class="text-2xl font-semibold mb-2 text-purple-300">Impuestos, IVA y F29</h2>
      <p class="text-gray-200 text-sm mb-4">
        No quieres sorpresas con el Servicio de Impuestos Internos. En Hambre de poder tendrás claridad
        de cuánto IVA y cuánto impuesto a la renta se viene cada mes.
      </p>

      <div class="grid md:grid-cols-3 gap-6 text-sm text-gray-200">
        <div>
          <h3 class="font-semibold mb-2 text-purple-200">IVA mensual</h3>
          <ul class="space-y-1">
            <li>• Estimación del IVA débito y crédito según tus ventas y compras.</li>
            <li>• Proyección del IVA a pagar a fin de mes.</li>
            <li>• Alertas de meses con IVA muy alto para preparar caja.</li>
          </ul>
        </div>
        <div>
          <h3 class="font-semibold mb-2 text-purple-200">F29 y declaraciones</h3>
          <ul class="space-y-1">
            <li>• Información ordenada para tu contador y tu F29.</li>
            <li>• Resumen mensual de ventas afectas, exentas y compras.</li>
            <li>• Checklist de documentos clave para no olvidar nada.</li>
          </ul>
        </div>
        <div>
          <h3 class="font-semibold mb-2 text-purple-200">Próximamente</h3>
          <ul class="space-y-1">
            <li>• Recordatorios automáticos de fechas importantes.</li>
            <li>• Simulaciones de impuestos según distintos niveles de utilidad.</li>
            <li>• Exportación directa de datos para tu contador.</li>
          </ul>
        </div>
      </div>
    </section>

    <!-- REMUNERACIONES -->
    <section id="sec-remuneraciones" class="bg-gray-900/85 border border-pink-500/70 rounded-2xl p-6 shadow-xl">
      <h2 class="text-2xl font-semibold mb-2 text-pink-300">Remuneraciones, equipo y licencias</h2>
      <p class="text-gray-200 text-sm mb-4">
        Tu equipo es uno de tus costos más importantes. Aquí tienes una visión clara y ordenada
        de cuánto realmente cuesta tu empresa en sueldos.
      </p>

      <div class="grid md:grid-cols-3 gap-6 text-sm text-gray-200">
        <div>
          <h3 class="font-semibold mb-2 text-pink-200">Planilla de sueldos</h3>
          <ul class="space-y-1">
            <li>• Cálculo de sueldos brutos y líquidos.</li>
            <li>• Carga previsional y salud por trabajador.</li>
            <li>• Costos totales mensuales del equipo.</li>
          </ul>
        </div>
        <div>
          <h3 class="font-semibold mb-2 text-pink-200">Licencias y asignaciones</h3>
          <ul class="space-y-1">
            <li>• Control de licencias médicas y reemplazos.</li>
            <li>• Asignación familiar y otros beneficios.</li>
            <li>• Comentarios de la IA sobre saturación de carga laboral.</li>
          </ul>
        </div>
        <div>
          <h3 class="font-semibold mb-2 text-pink-200">Visión estratégica</h3>
          <ul class="space-y-1">
            <li>• Comparación entre productividad y costo del equipo.</li>
            <li>• Escenarios de contratación o reducción de personal.</li>
            <li>• Preparación de datos para bancos o inversionistas.</li>
          </ul>
        </div>
      </div>
    </section>

    <!-- ORDEN TOTAL Y REPORTES -->
    <section id="sec-reportes" class="bg-gray-900/85 border border-cyan-500/70 rounded-2xl p-6 shadow-xl mb-6">
      <h2 class="text-2xl font-semibold mb-2 text-cyan-300">Orden total de tus finanzas y reportes grandes</h2>
      <p class="text-gray-200 text-sm mb-4">
        El objetivo final del plan Hambre de poder es que nunca más sientas que tus finanzas son un caos.
        Todo estará ordenado, claro y listo para reuniones importantes.
      </p>

      <div class="grid md:grid-cols-3 gap-6 text-sm text-gray-200">
        <div>
          <h3 class="font-semibold mb-2 text-cyan-200">Estados de resultados</h3>
          <ul class="space-y-1">
            <li>• Estados de resultados mensuales y acumulados.</li>
            <li>• Comparación presupuesto vs realidad.</li>
            <li>• Identificación de meses más rentables y más débiles.</li>
          </ul>
        </div>
        <div>
          <h3 class="font-semibold mb-2 text-cyan-200">Flujo de caja</h3>
          <ul class="space-y-1">
            <li>• Control de entradas y salidas de caja.</li>
            <li>• Proyección de caja para los próximos meses.</li>
            <li>• Alertas de posibles quiebres de caja.</li>
          </ul>
        </div>
        <div>
          <h3 class="font-semibold mb-2 text-cyan-200">Reportes para terceros</h3>
          <ul class="space-y-1">
            <li>• Resúmenes listos para bancos, socios o inversionistas.</li>
            <li>• Gráficos claros para presentaciones.</li>
            <li>• Exportación a PDF / Excel (a implementar en siguientes versiones).</li>
          </ul>
        </div>
      </div>
    </section>
  </main>

  <!-- Modal de bienvenida / mensajes -->
  <div id="successModal" class="hidden fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-50">
    <div class="bg-gray-900 rounded-2xl p-8 max-w-sm text-center shadow-2xl border border-gray-700">
      <h2 class="text-2xl font-semibold text-white mb-3" id="modalTitle">Acción completada</h2>
      <p class="text-gray-300 mb-6" id="modalMessage">Operación realizada correctamente.</p>
      <button
        onclick="closeModal()"
        class="bg-blue-600 hover:bg-blue-700 text-white px-5 py-2 rounded-lg transition"
      >
        Aceptar
      </button>
    </div>
  </div>

  <!-- Footer -->
  <footer class="bg-transparent backdrop-blur-md text-center py-4 text-gray-400 text-sm mt-auto">
    © 2025 Pymax Finanzas. Todos los derechos reservados.
  </footer>

 <!-- Lógica del panel Hambre de poder -->
<script>
  document.addEventListener("DOMContentLoaded", () => {
    // ---------- MODAL ----------
    window.showModal = function (title, message) {
      document.getElementById("modalTitle").innerText = title;
      document.getElementById("modalMessage").innerText = message;
      document.getElementById("successModal").classList.remove("hidden");
    };
    window.closeModal = function () {
      document.getElementById("successModal").classList.add("hidden");
    };

    // ---------- SESIÓN ----------
    const activeUser = JSON.parse(localStorage.getItem("activeUser") || "null");
    if (!activeUser) {
      // Si alguien entra sin sesión, lo devolvemos al inicio
      window.location.href = "index.html";
      return;
    }

    const userNameLabel = document.getElementById("userNameLabel");
    userNameLabel.textContent = `Hola, ${activeUser.name}`;
    userNameLabel.classList.remove("hidden");

    document.getElementById("logoutBtnPanel").onclick = () => {
      localStorage.removeItem("activeUser");
      localStorage.removeItem("trialPlan");
      localStorage.removeItem("trialStart");
      localStorage.removeItem("trialEnd");
      window.location.href = "index.html";
    };

    // ---------- Info de prueba 7 días ----------
    const trialPlan  = localStorage.getItem("trialPlan");
    const startIso   = localStorage.getItem("trialStart");
    const endIso     = localStorage.getItem("trialEnd");
    const trialBadgePanel = document.getElementById("trialBadgePanel");
    const planStatusLabel = document.getElementById("planStatusLabel");
    const planStatusDetail = document.getElementById("planStatusDetail");

    if (trialPlan === "hambre" && startIso && endIso) {
      const now  = new Date();
      const end  = new Date(endIso);
      const diff = end.getTime() - now.getTime();

      if (diff > 0) {
        const daysLeft = Math.ceil(diff / (1000 * 60 * 60 * 24));
        trialBadgePanel.textContent =
          `Prueba Hambre de poder: ${daysLeft} día${daysLeft !== 1 ? "s" : ""} restantes`;
        trialBadgePanel.classList.remove("hidden");

        planStatusLabel.textContent = "Plan Hambre de poder (prueba gratuita)";
        planStatusDetail.textContent =
          `Tus 7 días de prueba están activos. Te quedan ${daysLeft} día` +
          (daysLeft !== 1 ? "s" : "") + ` para exprimir al máximo el plan.`;
      } else {
        // Prueba vencida
        trialBadgePanel.classList.add("hidden");
        planStatusLabel.textContent = "Prueba vencida";
        planStatusDetail.textContent =
          "Tu prueba gratuita terminó. Muy pronto activaremos el pago para que continúes con el Hambre de poder.";
        // opcional: limpiar
        localStorage.removeItem("trialPlan");
        localStorage.removeItem("trialStart");
        localStorage.removeItem("trialEnd");
      }
    } else {
      // Sin prueba activa (cuando en el futuro ya haya plan pagado)
      planStatusLabel.textContent = "Plan Hambre de poder activo";
      planStatusDetail.textContent =
        "Tienes acceso completo al panel Hambre de poder. Muy pronto conectaremos los pagos reales.";
    }

    // ---------- Mensaje de bienvenida al iniciar la prueba ----------
    const showTrialWelcome = localStorage.getItem("showTrialWelcome");
    if (showTrialWelcome === "1") {
      showModal(
        "¡Felicidades!",
        "Tus 7 días de prueba de Hambre de poder acaban de comenzar. " +
        "Explora el panel, simula escenarios con tu gemelo financiero y revisa todas tus planillas."
      );
      localStorage.removeItem("showTrialWelcome");
    }

    // ---------- Scroll suave por botones de navegación ----------
    document.querySelectorAll("[data-scroll]").forEach(btn => {
      btn.addEventListener("click", () => {
        const target = btn.getAttribute("data-scroll");
        const el = document.querySelector(target);
        if (el) {
          el.scrollIntoView({ behavior: "smooth", block: "start" });
        }
      });
    });

    // ---------- Gemelo financiero (simulador simple) ----------
    const simVentas       = document.getElementById("simVentas");
    const simCostos       = document.getElementById("simCostos");
    const simDeltaVentas  = document.getElementById("simDeltaVentas");
    const simDeltaCostos  = document.getElementById("simDeltaCostos");
    const simDescripcion  = document.getElementById("simDescripcion");
    const simResultado    = document.getElementById("simResultado");
    const btnSimular      = document.getElementById("btnSimular");

    if (btnSimular && simResultado) {
      btnSimular.addEventListener("click", () => {
        const ventasBase  = Number(simVentas.value || 0);
        const costosBase  = Number(simCostos.value || 0);
        const deltaVtas   = Number(simDeltaVentas.value || 0);
        const deltaCostos = Number(simDeltaCostos.value || 0);
        const desc        = simDescripcion.value.trim() || "Escenario sin descripción";

        if (ventasBase <= 0) {
          simResultado.innerHTML =
            `<p class="text-red-300">Ingresa al menos tus ventas mensuales actuales para simular.</p>`;
          return;
        }

        const nuevasVentas = ventasBase * (1 + deltaVtas / 100);
        const nuevosCostos = costosBase * (1 + deltaCostos / 100);
        const utilidadBase = ventasBase - costosBase;
        const utilidadNueva = nuevasVentas - nuevosCostos;

        const margenBase = ventasBase > 0 ? (utilidadBase / ventasBase) * 100 : 0;
        const margenNuevo = nuevasVentas > 0 ? (utilidadNueva / nuevasVentas) * 100 : 0;
        const deltaUtilidad = utilidadNueva - utilidadBase;

        simResultado.innerHTML = `
          <div class="space-y-2">
            <p class="text-gray-200"><span class="font-semibold">Escenario:</span> ${desc}</p>
            <div class="grid md:grid-cols-2 gap-3 text-[11px]">
              <div class="bg-gray-800/80 rounded-lg p-3">
                <p class="font-semibold text-gray-100 mb-1">Situación actual</p>
                <p>Ventas: $${ventasBase.toLocaleString("es-CL")}</p>
                <p>Costos: $${costosBase.toLocaleString("es-CL")}</p>
                <p>Utilidad: $${utilidadBase.toLocaleString("es-CL")}</p>
                <p>Margen: ${margenBase.toFixed(1)}%</p>
              </div>
              <div class="bg-emerald-700/20 rounded-lg p-3 border border-emerald-500/40">
                <p class="font-semibold text-emerald-200 mb-1">Escenario simulado</p>
                <p>Ventas: $${nuevasVentas.toLocaleString("es-CL")}</p>
                <p>Costos: $${nuevosCostos.toLocaleString("es-CL")}</p>
                <p>Utilidad: $${utilidadNueva.toLocaleString("es-CL")}</p>
                <p>Margen: ${margenNuevo.toFixed(1)}%</p>
              </div>
            </div>
            <p class="text-sm mt-1 ${
              deltaUtilidad >= 0 ? "text-emerald-300" : "text-red-300"
            }">
              Diferencia de utilidad mensual: 
              <span class="font-semibold">$${deltaUtilidad.toLocaleString("es-CL")}</span>
              (${deltaUtilidad >= 0 ? "mejora" : "empeora"} tu resultado).
            </p>
            <p class="text-[10px] text-gray-400">
              Este cálculo es solo una simulación rápida local. Más adelante lo conectaremos
              con tus datos reales y con la IA de Pymax.
            </p>
          </div>
        `;
      });
    }
  });
</script>
